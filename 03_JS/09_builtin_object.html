<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
  <!-- JSON -->
  <script>
    /* 
      JSON(객체 이름이 JSON) 내장 객체
        
      1. JavaScript 객체 -> 문자열 형식의 JSON 데이터로 바꾸는 방법 (FRONT단 -> BACK단)
        var 문자열 = JSON.stringify(객체)
      
      2. 문자열 형식의 JSON 데이터 -> JavaScript 객체로 바꾸는 방법 (BACK단 -> FRONT단)
        var 객체 = JSON.parse(문자열)

    */
    
    // 객체 생성
    var person = {
      name: '홍길동',
      age: 30
    }

    // 객체 -> 문자열
    var str = JSON.stringify(person);
    console.log(typeof str, str);         // string {"name":"홍길동","age":30}

    // 문자열 -> 객체
    var person = JSON.parse(str);
    console.log(typeof person, person);   // object {name: '홍길동', age: 30}
  </script>

  <!-- Date -->
  <script>

    /*
      Date 내장 객체

      1. 타임스탬프 기반으로 날짜와 시간을 나타낸다.
        (타임스탬프 : 1970년 1월 1일 자정 UTC 기준으로 증가하고 있는 밀리초)
      2. 타임스탬프, 년, 월, 일, 시, 분, 초 등 원하는 값을 얻을 수 있다.
    */

    // 타임스탬프
    var timestamp = Date.now();
    console.log(typeof timestamp, timestamp);    // number 1693377063569    <- 타임스탬프 값임

    // 문자열 형식의 현재 날짜와 시간
    var strNow = Date();                   // new Date().toString()
    console.log(typeof strNow, strNow);    // string Wed Aug 30 2023 15:32:40 GMT+0900 (한국 표준시)    

    // 객체 형식의 현재 날짜와 시간
    var now = new Date();
    console.log(typeof now, now);          // object Wed Aug 30 2023 15:35:52 GMT+0900 (한국 표준시)

    // 년, 월, 일, 시, 분, 초, 타임스탬프
    var year = now.getFullYear();
    var month = now.getMonth();   // 주의! 0 ~ 11
    var day = now.getDate();
    var hour = now.getHours();
    var minute = now.getMinutes();
    var second = now.getSeconds();
    var timestamp = now.getTime();

    console.log(year, month, day, hour, minute, second, timestamp);


    // 특정 날짜와 시간을 가진 객체 생성
    var someday = new Date(2023, 8, 30, 16, 30, 30);    // 2023-09-30 16:30:30 (8월이 아님 주의!)
    console.log(someday);

  </script>


  <!-- String -->
  <script>

    /* String 내장 객체 */

    var str = 'JavaScript';

    // 1. 문자열의 길이
    console.log(str.length);

    // 2. 특정 문자(지정된 인덱스에 위치하는 문자)
    console.log(str.charAt(0));               // 첫 번째 문자
    console.log(str.charAt(str.length - 1));  // 마지막 문자

    // 3. 특정 문자열
    console.log(str.substring(0, 4));  // 'Java'   : 인덱스 0 포함 ~ 인덱스 4 불포함
    console.log(str.substring(4));     // 'Script' : 인덱스 4 포함 ~ 끝까지

    // console.log(str.substr(0, 4));  // 'Java'   : 인덱스 0부터 4개 글자
    // console.log(str.substr(4));     // 'Script' : 인덱스 4부터 전체 글자
    
    console.log(str.slice(0, 4));      // 'Java' : 인덱스 0 포함 ~ 인덱스 4 불포함
    console.log(str.slice(4));         // 'Script' : 인덱스 4 포함 ~ 끝까지
    console.log(str.slice(-10, -6));   // 'Java'   : 인덱스 -10 포함 ~ 인덱스 -6 불포함 (마지막 글자의 인덱스 = -1)
    console.log(str.slice(-6));        // 'Script' : 인덱스 -6 포함 ~ 끝까지

    // 4. 문자열 연결
    console.log(str.concat(', ', 'Hello World'));   // 'JavaScript, Hello World'

    // 5. 특정 패턴으로 시작/특정 패턴으로 끝나는지 검사
    console.log(str.startsWith('Java'));    // 'Java'로 시작하면 true
    console.log(str.endsWith('Script'));    // 'Script'로 끝나면 true

    // 6. 특정 문자열의 위치(인덱스) 찾기
    console.log(str.indexOf('a'));        // 'JavaScript'에서 발견된 1번째 a의 인덱스를 반환
    console.log(str.lastIndexOf('a'));    // 'JavaScript'에서 발견된 마지막 a의 인덱스를 반환

    // 7. 특정 문자열을 주어진 길이만큼 채우기
    console.log(str.substring(0, 4).padEnd(10, '*'));   // 'Java******'
    console.log(str.substring(4).padStart(10, '*'));    // '****Script'
    
    // 8. 주어진 횟수만큼 반복하기
    console.log(str.repeat(3));

    // 9. 찾아 바꾸기
    var str = '192.168.0.101';
    console.log(str.replace('.', '_'));      // '192.168.0.101' -> '192_168.0.101'
    console.log(str.replaceAll('.', '_'));  // '192.168.0.101' -> '192_168_0_101'

    // 10. 대소문자 변환하기
    var str = 'JavaScript';
    console.log(str.toLowerCase());   // 'JavaScript' -> 'javascript'
    console.log(str.toUpperCase());   // 'JavaScript' -> 'JAVASCRIPT'

    // 11. 문자열 앞뒤로 포함된 불필요한 공백 제거하기
    var str = '     Java      Script     ';
    console.log('[' + str.trim() + ']');
    console.log('[' + str.trimStart() + ']');   // alias 가능 : trimLeft()
    console.log('[' + str.trimEnd() + ']');     // alias 가능 : trimRight()
    console.log('[' + str.trimLeft() + ']');
    console.log('[' + str.trimRight() + ']');

    // 12. 문자열 객체의 문자열 값 반환
    var str = new String('JavaScript');
    console.log(str);             // String {'JavaScript'} : 중괄호로 묶여있는 객체로 출력됨
    console.log(str.valueOf());   // 문자열 'JavaScript'

    // 13. 문자열을 분리해서 배열로 만들기
    var str = 'Hello tom Nice to meet you!';
    var words = str.split(' ');   // words = ['Hello', 'tom', 'Nice', 'to', 'meet', 'you!']
    console.log(words[1]);        // 'tom'
  </script>

  <!-- Array -->
  <script>

    /* Array 내장 객체 */

    var array = ['travel', 'fitness', 'movie', 'tracking', 'fishing'];

    // 1. 반복 메소드 (콜백)
    array.forEach(function(element){
      console.log(element);
    });
    array.forEach(function(element, i){   // 배열요소, 인덱스
      console.log(i, ': ' + element);
    });

    // 2. 필터 (정해진 조건을 만족하는 요소만 남긴 배열 만들기)
    // array.filter((요소) => 요소 검사);
    var result = array.filter((element) => element.length > 6);   // 길이가 6보다 큰 요소만 남긴 배열 반환
    console.log(result);

    // 3. 배열 요소를 변경하기
    // array.map((요소) => 변경할 값)
    var array = [1, 2, 3, 4, 5];
    var map = array.map((element) => element ** 2);   // 모든 요소를 2제곱 값으로 바꾼 배열 반환
    console.log(map);

    // 4. 배열 요소를 합쳐서 문자열로 반환하기
    var aray = ['travel', 'fitness', 'movie', 'tracking', 'fishing'];
    console.log(array.join());       // 콤마(,)로 연결 (디폴트)
    console.log(array.join(' '));    // 공백으로 연결

  </script>

  <!-- Math -->
  <script>

    /* Math 내장 함수 */

    console.log(Math.abs(-5));      //  5    ,  -5의 절대값

    console.log(Math.ceil(7.1));    //  8    ,   7.1의 정수 올림값
    console.log(Math.ceil(-7.1));   // -7   ,  -7.1의 정수 올림값

    console.log(Math.floor(7.1));   //  7    ,   7.1의 정수 내림값
    console.log(Math.floor(-7.1));  // -8   ,  -7.1의 정수 내림값

    console.log(Math.round(7.1));   //  7   ,   7.1의 정수 반올림
    console.log(Math.round(-7.1));  // -7   ,  -7.1의 정수 반올림

    console.log(Math.trunc(7.1));   //  7    ,   7.1의 소수점 아래 절사
    console.log(Math.trunc(-7.1));  // -7    ,  -7.1의 소수점 아래 절사

    console.log(Math.max(1, 2, 3, 4, 5));   // 5    , 주어진 값 중 가장 큰 값  
    console.log(Math.min(1, 2, 3, 4, 5));   // 1    , 주어진 값 중 가장 작은 값

    var array = [1, 2, 3, 4, 5];
    console.log(Math.max(...array));    // 5    , 배열의 요소 중 가장 큰 값
    console.log(Math.min(...array));    // 1    , 배열의 요소 중 가장 작은 값

    console.log(Math.pow(2, 3));    // 8  , 2의 3제곱

    console.log(Math.random());     // 0 <= 난수 < 1

    console.log(Math.sqrt(25));     // 5, 루트 25


  </script>

  <!-- 문제1.시계 만들기 -->
  <style>
    .warning {
      color: crimson;
    }
  </style>

  <div id="watch">
    <span id="year"></span>년 
    <span id="month"></span>월 
    <span id="day"></span>일 
    <span id="hour"></span>시
    <span id="minute"></span>분 
    <span id="second"></span>초
  </div>

  <script>
    setInterval(function(){
      // 화면 표시
      var now = new Date();
      document.getElementById('year').textContent = now.getFullYear();
      document.getElementById('month').textContent = String(now.getMonth() + 1).padStart(2, '0');
      document.getElementById('day').textContent = String(now.getDate()).padStart(2, '0');
      document.getElementById('hour').textContent = String(now.getHours()).padStart(2, '0');
      document.getElementById('minute').textContent = String(now.getMinutes()).padStart(2, '0');
      document.getElementById('second').textContent = String(now.getSeconds()).padStart(2, '0');

      // 50초 넘으면 빨간색으로 바꾸기(class 속성 변경)
      if(now.getSeconds() >= 50){
        document.getElementById('watch').setAttribute('class', 'warning');
      } else {
        document.getElementById('watch').removeAttribute('class');
      }
    }, 1000);

  </script>

  <hr>

  <!-- 문제2.수능일까지 D-DAY -->
  <!-- 1일 이상 남은 경우 : D-70 15:10 -->
  <!-- 1일 미만 남은 경우 : D-DAY 15:10 -->
  <!-- 디데이가 지난 경우 : D+315 -->
  <div id="dday"></div>
  <script>
    setInterval(function(){

      var now = new Date();               // 2023-08-30
      var dday = new Date(2023, 10, 16);  // 2023-11-16(주의!)
      
      var timestamp = dday.getTime() - now.getTime(); // dday - now로 계산해도 타임스탬프 결과가 나옴
      var totalSecond = parseInt(timestamp / 1000);   // 밀리초를 초 단위로 변환함(parseInt : 소수점 제거됨)
      var restDay = parseInt(totalSecond / 60 / 60/ 24);    // 초 -> 분 -> 시간 -> 남은 일
      var restHour = parseInt(totalSecond / 60 / 60) % 24;  // 초 -> 분 -> 남은 시간
      var restMinute = parseInt(totalSecond / 60) % 60;     // 초 -> 남은 분

      var str = 'D';
      if(totalSecond > 0){
        str += '-';
        if(restDay >= 1){
          str += restDay + '&nbsp;';
        } else{ str += 'DAY&nbsp;'}
        str += String(restHour).padStart(2, '0') + ':' + String(restMinute).padStart(2, '0');
      } else {
        var timestamp2 = now.getTime() - dday.getTime();
        var totalSecond2 = parseInt(timestamp2 / 1000);
        var lateDay = parseInt(totalSecond2 / 60 / 60 / 24) + 1;    // 지난 일
        str += '+' + lateDay;
      }

      document.getElementById('dday').innerHTML = '<h1>' + str + '</h1>';

    }, 1000);
    
  </script>

  
  <hr>


  <!-- 문제3. 정수 난수 발생기 -->
  <!-- getRandomInt(2, 5) : 2부터 5개(2, 3, 4, 5, 6) 중 하나의 난수를 반환하는 함수 -->
  <script>
    function getRandomInt(start, count){
      return Math.floor(Math.random() * count + start);
    }
    
    for(let n = 0; n < 10; n++){
      console.log(getRandomInt(2, 5));
    }


  </script>


  


  <!-- 문제4. 올림 함수를 자리수 지정이 가능하도록 커스터마이징 하기 -->
  <script>

    /*
      ceil(555.555, 2)  === 555.56  |  Math.ceil(555.555 * 100)) / 100
                                       Math.ceil(555.555 * Math.pow(10, 2)) / Math.pow(10, 2)

      ceil(555.555, 1)  === 555.6   |  Math.ceil(555.555 * 10)  / 10
                                       Math.ceil(555.555 * Math.pow(10, 1)) / Math.pow(10, 1)

      ceil(555.555, 0)  === 556     |  Math.ceil(555.555 * 1)   / 1
                                       Math.ceil(555.555 * Math.pow(10, 0)) / Math.pow(10, 0)

      ceil(555.555)     === 556
      ceil(555.555, -1) === 560
      ceil(555.555, -2) === 600
    */

    function ceil(number, digit = 0){
      return Math.ceil(number * Math.pow(10, digit)) / Math.pow(10, digit);
    }

    console.log(ceil(555.555, 2));
    console.log(ceil(555.555, 1));
    console.log(ceil(555.555, 0));
    console.log(ceil(555.555));
    console.log(ceil(555.555, -1));
    console.log(ceil(555.555, -2));

  </script>


</body>
</html>